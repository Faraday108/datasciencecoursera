---
title: "Exploratory Data Analysis"
author: "Nathan Young"
output: pdf_document
---
In this document, I'm taking notes based off the Coursera course Exploratory Data Analysis. 

## Week 1
### Setting Your Working Directory (Windows)
To find current working directory: getwd().

The working directory is where R finds all of its files for reading and writing on your computer. When you read data or write things out using functions or write.csv, they will be read or written to your home, your working directory. 

To find files in current working directory: dir()

It is a good idea when working on a class or project to create a folder that you store everything in for the project and set this folder as the working directory. 

To find what is in workspace: ls()

If a R file is saved in the working directory (visible when running dir()), you can source it to load its contents to the workspace with source("filename")

### Principles of Analytic Graphics
Based on book by Edward Tuffey, Beautiful Evidence, with the following principles. 

1. Show Comparisons
  + Evidence for a hypothesis is always *relative* to another competing hypothesis
  + Always ask "compared to what?" Evidence is relative

In boxplot example of an air cleaner vs change in asthma symptom free days, what are we comparing to? We need to compare to a control (or something eise) so we can see the impact of the treatment. 

2. Show causality, mechanism, explanation, systematic structure. 
  + What is your causal framework for thinking about a question? 

In prior example of air cleaner and asthma days, what improves their symptoms? Hypothesize that air cleaner is removing particulate matter and improving symptoms. So we might also show a plot of fine particulate matter in control vs air cleaner. This allows us to say that not only do symptoms decrease but the air is cleaner linking the particulate matter and symptoms.  

3. Show multivariate data
  + multivariate means more than two variables. 
  + The real world is multivariate
  + Need to "escape flatland"

This rule boils down to show as much data on a single plot as you can. And the reason is because the world is inherently multivariate, including more information on a plot better mirrors the world. 

Example plot of concentration of particulate matter vs daily mortality in NYC from 1987 till 2000. Overall slight negative association between PM10 levels and mortality. Regression line slopes downward slightly. Could hypothesize that lower airpollution is associated with higher mortality but if you include additional confounding variables such as season it can change the picture. When broken down to each season, there is now a slight positive correlation (simpson's paradox)

4. Integration of evidence
  + Completely integrate words, numbers, images, and diagrams
  + Data graphics should make use of many modes of data presentation
  + Don't let hte tool drive the analysis

Use as many different modes of evidence or displaying evidence as you can. Don't show only a plot, or a table, but use multiple to make the information as rich as possible. Advantage of R, use flexible tools. 

5. Describe and document the evidence with appropriate labels, scales, sources, etc. 
  + A data graphic should tell a complete story that is credible. 

Preserve the code that made the plot and the souces of where you got the data to maintain the credibility. 

6. Content is king
  + Analytical presentation ultimately stand or fall depending on the quality, relevance, and integrity of their content. 

What's the story, what's the data, whats the best way to present it? 

### Exploratory Graphics
How to construct graphs for yourself so you can look at the data and explore what's going on in data ses youre looking at. 

Why do we use graphs in data analysis? 

* To understand data properties
* To find patterns in data
* To suggest modeling strategies
* To 'debug' analyses
* To communicate results

Exploratory graphs are used for the first 4. 

Characteristic of exploratory graphs. 

* Made quickly
* A large number are made
* Goal is for personal understanding
* Axes/legends are generally cleaned up later
* Color/size primarily used for information

Example with real data set on pollution. Question: are there any counties in the US that exceed the standard of 12ug/m3 for fine particle pollution? Downloaded and cleaned already for example. 

Simple summaries of data:

* One dimension: five-number summary, boxplots, histograms, density plot, barplot. 

summary() produces a 5 number summary of min, 1st quartile, median, mean, 3rd quartile, and max. 
boxplot(data, col = "blue") will creaet a boxplot
abline(h = y) creates a horizontal line on boxplot
hist(data, col = "green") for a histogram
rug(data) plots points under the histogram, helps see outliers. 
Can change breaks on a histogram with breaks = n. Don't want bins to be too big or else its noisy, or too small or you can't see shape. 
Can put abline on histogram too, example has two: one at max of 12 and another at median. 
barplot() can show a graphical summary for categorical data. For example plotting over region shows number of counties in the west and east.

* Two dimension: multiple/overlayed 1D plots with lattice/ggplot2, scatterplots, smooth scatterplots, overlayed/multiple 2d plots and coplots, color/size/shape to add dimension, spinning plots, actual 3d plots (not as useful). 

Multiple boxplots:
```{r, eval = FALSE}
boxplot(pm25 ~ region, data = pollution, col = "red")
```
Multiple histograms: 
```{r, eval = FALSE}
par(mfrow(c = (2,1), mar = c(4, 4, 2, 1))
hist(subset(pollution, region == "east")$pm25, col = "green")
hist(subset(pollution, region == "west")$pm25, col = "green")
```
Scatterplot: 
```{r, eval = FALSE}
with(pollution, plot(latitute, pm25))
abline(h = 12, lwd = 2, lty = 2)
```
Scatterplot with color: 
```{r, eval = FALSE}
with(pollution, plot(latitude, pm25, col = region))
abline(h = 12, lwd = 2, lty = 2)
```
Multiple scatterplots: 
```{r, eval = FALSE}
par(mfrow = c(1,2), mar = c(5, 4, 2, 1))
with(subset(pollution, region == "west"), plot(latitude, pm25, main = "West"))
with(subset(pollution, region == "east"), plot(latitude, pm25, main = "East"))
```

Summary:

* Exploratory plots are "quick and dirty"
* Let you summarize the data (usually graphically) and highlight any broad features
* Explore basic questions and hypotheses (and perhaps rule them out)
* Suggest modeling strategies for the "next step"

